import{r as A}from"./resumen-c77b66c0.js";import{q as I,a as k,U as S,k as O,b as N,r as x,c as m,d as w,H as P,D as b,f as l,h as d,i as o,e as U,J as B,j as C,K as _,L as y,M as V,_ as M,u as D,B as T,o as E,x as L,F as R,p as q,m as K,z as F}from"./index-695077c9.js";const W="/images/characters/5.png",j={async validateOrder(u){const c=I();try{c.setLoading(!0,"cargando");const a=await k.post(`${S}/validate-order-code`,u);if(a.status===200)a.data.valid?(O.push("/gracias"),c.visible.show_validate=!1):alert("codigo incorrecto"),c.setLoading(!1,"validando tu orden");else return c.setLoading(!1,"validando tu orden"),alert("error, intentalo de nuevo"),null}catch(a){return c.setLoading(!1,"validando tu orden"),console.error("An error occurred while sending the order:",a),alert("error, intentalo de nuevo"),null}}},z={style:{display:"flex","flex-direction":"column",gap:"2rem",position:"relative"}},H={key:0,style:{position:"absolute","background-color":"#ffffff9f",left:"0",right:"0",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},G=l("img",{src:W,alt:"",style:{width:"100%","max-width":"10rem"}},null,-1),J=l("p",{style:{"max-width":"100%",color:"black"}},"Hemos enviado un código de 3 dígitos a tu WhatsApp. Introdúcelo para validar tu pedido.",-1),Z={style:{display:"flex",gap:"1rem",margin:"auto"}},Q={__name:"validate",setup(u){const c=N(),a=I(),t=x({first:"",second:"",third:""}),h=(n,e)=>{const f=e.target.value;/^\d$/.test(f)?(t.value[n]=f,V(()=>r(n))):e.target.value=""},p=(n,e)=>{e.target.value===""&&V(()=>v(n))},r=n=>{n==="first"?(t.value.second="",document.querySelector("#secondInput").focus()):n==="second"&&(t.value.third="",document.querySelector("#thirdInput").focus())},v=n=>{n==="second"?(t.value.fist="",document.querySelector("#firstInput").focus()):n==="third"&&document.querySelector("#secondInput").focus()},g=async()=>{const n={order_id:c.last_order,order_code:t.value.first+t.value.second+t.value.third};await j.validateOrder(n)};return(n,e)=>{const f=m("Button"),i=m("Dialog");return w(),P(i,{modal:"",class:"mx-2",style:{width:"20rem",display:"flex","flex-direction":"column","background-color":"#fff"},visible:o(a).visible.show_validate,"onUpdate:visible":e[9]||(e[9]=s=>o(a).visible.show_validate=s)},{footer:b(()=>[l("div",null,[d(f,{disabled:o(a).loading.visible,onClick:g,style:{border:"none",width:"100%","font-weight":"bold"},label:"Validar mi pedido",severity:"help"},null,8,["disabled"])])]),default:b(()=>[l("div",z,[o(a).loading.visible?(w(),U("div",H,[d(o(B),{style:{width:"100px",height:"100px"},strokeWidth:"4",animationDuration:".1s","aria-label":"Custom ProgressSpinner"})])):C("",!0),G,J,l("div",Z,[d(o(_),{modelValue:t.value.first,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.first=s),id:"firstInput",style:{width:"3rem",height:"2rem","text-align":"center"},maxlength:"1",onInput:e[1]||(e[1]=s=>h("first",s)),onKeydown:e[2]||(e[2]=y(s=>p("first",s),["backspace"]))},null,8,["modelValue"]),d(o(_),{modelValue:t.value.second,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.second=s),id:"secondInput",style:{width:"3rem",height:"2rem","text-align":"center"},maxlength:"1",onInput:e[4]||(e[4]=s=>h("second",s)),onKeydown:e[5]||(e[5]=y(s=>p("second",s),["backspace"]))},null,8,["modelValue"]),d(o(_),{modelValue:t.value.third,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.third=s),id:"thirdInput",style:{width:"3rem",height:"2rem","text-align":"center"},maxlength:"1",onInput:e[7]||(e[7]=s=>h("third",s)),onKeydown:e[8]||(e[8]=y(s=>p("third",s),["backspace"]))},null,8,["modelValue"])])])]),_:1},8,["visible"])}}},X="/images/WhatsApp.svg.webp",Y={async getPaymentMethods(){try{const u=await k.get(`${S}/payment_methods/`);return u.status===200?u.data:(console.error("An error occurred while fetching the ingredients:",u.status),null)}catch(u){return console.error("An error occurred while fetching the ingredients:",u),null}}};const $=u=>(q("data-v-499764fc"),u=u(),K(),u),ee={class:"col-12 px-2 my-8 p-0",style:{"margin-top":"6rem"}},te=$(()=>l("b",null,[l("h2",{class:"m-0 text-4xl md:text-7xl",style:{"text-shadow":"0 0 2rem red"}},[l("i",{class:"fa-solid fa-ticket text-red pr-3",style:{background:"linear-gradient(#ffcf00, red)","-webkit-background-clip":"text","background-clip":"text","-webkit-text-fill-color":"transparent"}}),l("b",{class:"text-white"}," FINALIZAR COMPRA ")])],-1)),oe={class:"grid mx-auto",style:{"max-width":"800px"}},se={class:"col-12 md:col-6 p-1 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem"}},le={class:"flex flex-wrap align-items-center mb-2 gap-2",style:{width:"100%"}},ae={class:"flex flex-wrap align-items-center mb-2 gap-2",style:{width:"100%"}},ne={class:"flex flex-wrap align-items-center mb-2 gap-2",style:{width:"100%"}},re={class:"flex flex-wrap align-items-center mb-2 gap-2",style:{width:"100%"}},ie=$(()=>l("p",{class:"text-white"},[F("El telefono debe estar disponible en WhatsApp para validar el pedido "),l("img",{style:{width:"1.5rem"},src:X,alt:""})],-1)),de={class:"flex flex-wrap align-items-center mb-2 gap-2",style:{width:"100%"}},ue={__name:"pay",setup(u){const c=N(),a=D();x(0);const t=T(),h=x([]);return E(async()=>{var p;h.value=await Y.getPaymentMethods(),((p=t.user.payment_method_option)==null?void 0:p.id)!=7?a.setNeighborhoodPrice():a.setNeighborhoodPriceCero()}),L(()=>t.user.payment_method_option,p=>{p.id==7?(a.current_delivery=a.location.neigborhood.delivery_price,a.location.neigborhood.delivery_price=0):a.setNeighborhoodPrice()}),(p,r)=>{const v=m("P"),g=m("InputText"),n=m("InputMask"),e=m("Dropdown"),f=m("Textarea");return w(),U(R,null,[l("div",ee,[d(v,{class:"text-center text-2xl my-8"},{default:b(()=>[te]),_:1}),l("div",oe,[l("div",se,[l("div",le,[d(g,{style:{width:"100%"},id:"username",placeholder:"NOMBRE",modelValue:o(t).user.name,"onUpdate:modelValue":r[0]||(r[0]=i=>o(t).user.name=i),invalid:""},null,8,["modelValue"])]),l("div",ae,[d(g,{onClick:r[1]||(r[1]=i=>o(a).setVisible("currentSite",!0)),modelValue:o(a).location.neigborhood.name,style:{width:"100%"},id:"username",placeholder:"Barrio",invalid:"",readonly:""},null,8,["modelValue"])]),l("div",ne,[d(g,{modelValue:o(t).user.address,"onUpdate:modelValue":r[2]||(r[2]=i=>o(t).user.address=i),style:{width:"100%"},id:"username",placeholder:"DIRECCION",invalid:""},null,8,["modelValue"])]),l("div",re,[ie,d(n,{modelValue:o(t).user.phone_number,"onUpdate:modelValue":r[3]||(r[3]=i=>o(t).user.phone_number=i),style:{width:"100%"},prefix:"+57",id:"basic",mask:"999 999 9999",placeholder:"TELEFONO"},null,8,["modelValue"])]),l("div",de,[d(e,{modelValue:o(t).user.payment_method_option,"onUpdate:modelValue":r[4]||(r[4]=i=>o(t).user.payment_method_option=i),style:{width:"100%"},id:"username",placeholder:"METODO DE PAGO",invalid:"",options:h.value.filter(i=>i.id!=7),optionLabel:"name"},null,8,["modelValue","options"])]),d(f,{modelValue:o(c).cart.order_notes,"onUpdate:modelValue":r[5]||(r[5]=i=>o(c).cart.order_notes=i),style:{height:"8rem",resize:"none"},placeholder:"NOTAS:"},null,8,["modelValue"])]),d(A,{style:{"background-color":"white"},class:"md:col-6"})])]),d(Q)],64)}}},me=M(ue,[["__scopeId","data-v-499764fc"]]);export{me as default};
